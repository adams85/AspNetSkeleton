<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <appSettings configSource="ApiSettings.config"/>

  <system.web>
    <!-- https://blogs.msdn.microsoft.com/webdev/2012/11/19/all-about-httpruntime-targetframework/ -->
    <httpRuntime targetFramework="4.5"/>

    <!-- TODO: replace (http://www.developerfusion.com/tools/generatemachinekey/) -->
    <machineKey validationKey="0E98019B8BFF2713AEA7781A55D14408F1F68E4C4C22A03D639F287C190702C9383721C62BF9664F6E7AAB9F212418F0DBFAEADB2C2A28604D7C1B7A8C8807A8" decryptionKey="122A33EDF5D6F523C6CD95B248F254B63D288C2484BC6CD4941E19ED16AB120E" validation="SHA1" decryption="AES"/>

    <compilation debug="true" targetFramework="4.5"/>
    
    <pages controlRenderingCompatibilityVersion="4.0"/>

    <authentication mode="None"/>
  </system.web>
  
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="false"/>
    <directoryBrowse enabled="false"/>
    <handlers>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
      <remove name="OPTIONSVerbHandler"/>
      <remove name="TRACEVerbHandler"/>
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0"/>
    </handlers>
  </system.webServer>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Http" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-5.2.3.0" newVersion="5.2.3.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Net.Http.Formatting" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-5.2.3.0" newVersion="5.2.3.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Autofac" publicKeyToken="17863af14b0044da" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-4.6.1.0" newVersion="4.6.1.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-10.0.0.0" newVersion="10.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>

  <system.diagnostics>
    <trace autoflush="true"/>
    <sources>
      <source name="AspNetSkeleton.Api" switchName="sourceSwitch" switchType="System.Diagnostics.SourceSwitch">
        <listeners>
          <clear/>
          <add name="ApiWriterListener"/>
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="sourceSwitch" value="Warning"/>
    </switches>
    <sharedListeners>
      <add name="ApiWriterListener" type="System.Diagnostics.TextWriterTraceListener" traceOutputOptions="DateTime,Callstack" initializeData="Logs\api.log"/>
    </sharedListeners>
  </system.diagnostics>
</configuration>
